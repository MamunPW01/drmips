% Short manual that explains the end user how to use the simulator.

\documentclass[11pt,a4paper,twoside,titlepage]{article}

\usepackage[utf8x]{inputenc}
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{color}
\usepackage{siunitx}

\newcommand{\Author}{Bruno Nova}
\newcommand{\Title}{DrMIPS -- User Manual}

\author{Bruno Nova}
\title{\Title}
\hypersetup{pdfauthor={Bruno Nova},pdftitle={\Title}}
\definecolor{cloudwhite}{cmyk}{0,0,0,0.025}
\graphicspath{{figures/}}

\lstset{
	extendedchars=\true,
	inputencoding=utf8x,
	literate={รง}{{\c{c}}}1,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries,
	numbers=left,
	numberstyle=\scriptsize\texttt,
	stepnumber=1,
	numbersep=8pt,
	frame=tblr,
	float=htb,
	aboveskip=8mm,
	belowskip=4mm,
	backgroundcolor=\color{cloudwhite},
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,	
	captionpos=b,
	breaklines=true,
	breakatwhitespace=false,
	escapeinside={\%*}{*)},
	morekeywords={*,var,template,new}
}

\newcommand{\menupath}[1]{\textbf{\emph{#1}}}



\begin{document}

\maketitle
\tableofcontents
\newpage

\section{General User Interface}

The graphical user interface of the DrMIPS simulator is composed by the menu 
bar, the toolbar and the main area where the main contents of the simulator 
are displayed.
The icons in the toolbar are shortcuts for some frequently used actions in the
menus. You can hover the mouse over each icon to find out what it does.

The interface is displayed with a light theme by default. But you can switch
to the dark theme by selecting \menupath{View > Dark theme} in the menu.
DrMIPS supports multiple languages, so these names may be different.
You can choose another language in the \menupath{View > Language} menu.

The main contents of the simulator are split in tabs by default. Each tab can
be positioned on the left side of the window or on the right side. 
You can move a tab to the other side by right-clicking on it and selecting 
\menupath{Switch side} in the menu that appears.
If you would prefer to see the contents split in windows instead, you can do
that by selecting \menupath{View > Internal windows} in the menu.
The position and size of the tabs/windows are remembered on exit.

The tabs or windows displayed are:
\begin{itemize}
	\item \textbf{Code}: the code editor, where you can create and edit an
		assembly program to be executed by the simulator.
	\item \textbf{Assembled}: after the code is assembled successfully, this
		displays the resulting machine instructions.
	\item \textbf{Datapath}: the graphical representation of the datapath,
		and its state, is displayed here.
	\item \textbf{Registers}: lists all the registers and their values.
	\item \textbf{Data memory}: displays all the values in the data memory.
\end{itemize}


\section{Code Tab/Window}

This is the code editor, where you can write an assembly program.
The editor displays the numbers of the lines and highlights the valid syntax.

You can press \emph{Ctrl+Space} to auto-complete the keyword you are writing.
Doing so displays a list of instructions, pseudo-instructions, directives and
labels that can complete that keyword.
It also displays a window that shows what the selected keyword in the list does
and how it is used.
Pressing \emph{Ctrl+Space} on an empty space will list all available
instructions, pseudo-instructions, directives and labels.

You can undo/redo changes, cut/copy/paste text and find/replace words in the
code. These actions can be accessed through the \menupath{Edit} menu or by
right-clicking in the code editor.
The code can be saved to or read from a file. These actions are available in
the \menupath{File} menu.

After writing your assembly program, you must assemble it.
This is done by selecting \menupath{Execute > Assemble} from the menu or by
pressing the respective button in the toolbar.
If the program has errors, a message box will indicate the first error and an
exclamation icon will appear next to the numbers of the lines that have an
error.
You can hover the mouse cursor over those icons to discover what is the error.
If the program is correct, no error message is displayed and you can then
proceed to execute it.


\section{Assembled Tab/Window}

After the code is successfully assembled, the resulting machine code 
instructions will be displayed here in a table.

Each line in the table corresponds to an ``assembled'' instruction, and it
contains its address, machine code and original instruction.
The instruction currently being executed is highlighted.
If simulating a pipeline processor, all the instructions that are in the
pipeline are highlighted in different colors, each one representing a
different stage.

Hovering the mouse cursor over an instruction in the table will present a
tooltip. This tooltip displays the type of the instruction and the values
of its fields.

The values are shown in decimal format by default.
You can change that format to binary or hexadecimal by using the combo box
at the bottom of the window/tab.
This combo box is available in all tabs/windows, except in the code tab/window.

To control the simulation, you can the \menupath{Execute} menu or the toolbar.
Press \menupath{Step} to execute one instruction, \menupath{Back step}
to revert one instruction, \menupath{Run} to execute the entire program and
\menupath{Restart} to revert to the first instruction.


\section{Registers Tab/Window}

\section{Data Memory Tab/Window}

\section{Datapath Tab/Window}

%TODO Usage example?


\end{document}
